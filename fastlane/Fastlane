# Fastfile

# Load the API key from GitHub Secrets
app_store_connect_api_key = {
  key_id: ENV['APP_STORE_CONNECT_KEY_ID'],          # from GitHub Secret
  issuer_id: ENV['APP_STORE_CONNECT_ISSUER_ID'],    # from GitHub Secret
  key_content: ENV['APP_STORE_CONNECT_API_KEY']     # from GitHub Secret
}

default_platform(:ios)

platform :ios do
  desc "Push a new beta build to TestFlight"
  lane :beta do
    build_app(
      scheme: "YourAppScheme" # Replace with your app scheme
    )
    
    upload_to_testflight(api_key: app_store_connect_api_key)
  end
end
